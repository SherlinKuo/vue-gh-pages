(function(){"use strict";var t={2079:function(t,e,o){var l=o(9242),a=o(5939),r=o(6423),n=o(3396);function i(t,e){const o=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(o)}var s=o(89);const d={},c=(0,s.Z)(d,[["render",i]]);var u=c,m=o(2483),p=o(7139);const h={class:"container-product"},g={class:"col py-3"},b={class:"col-md-12"},f={class:"row"},_=(0,n._)("h2",{class:"col-md-2"},"產品列表",-1),v={class:"table table-hover mt-4"},y=["width"],w={key:0,class:"text-success"},P={key:1},k=["onClick"],U={class:"action-td"},x=["onClick"],D=["onClick"],$={key:0,class:"col-md-12"},C=(0,n._)("h2",null,"單一產品細節",-1),M={class:"row"},j={class:"card mb-3 col-md-8 py-3"},O=["src","alt"],q={class:"card-body"},V={class:"card-title"},z={class:"badge bg-primary ms-2"},E={class:"card-text"},Z={class:"card-text"},S={class:"d-flex"},L={class:"card-text me-2"},T={class:"card-text text-secondary"},A={class:"col-md-4"},H=["src","alt"],I={class:"modal fade",id:"productDetailModal",tabindex:"-1","aria-labelledby":"productDetailModal","aria-hidden":"true"},Y={class:"modal-dialog modal-xl"},K={class:"modal-content"},N=(0,n._)("div",{class:"modal-header bg-primary text-white"},[(0,n._)("h1",{class:"modal-title fs-5",id:"productDetailModalLabel"},"---"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body row justify-content-around"},F={class:"col-md-5"},G={class:"form-floating"},J=(0,n._)("label",{for:"imageUrl"},"主要圖片網址",-1),Q=["src","alt"],R=(0,n._)("h5",null," 詳細圖片 ",-1),W=["onUpdate:modelValue","id"],X=["for"],tt=["src","alt"],et=["onClick"],ot=(0,n._)("i",{class:"bi bi-trash"},null,-1),lt=[ot],at={class:"col-md-6"},rt={class:"form-floating"},nt=(0,n._)("label",{for:"title"},"標題",-1),it={class:"form-floating"},st=(0,n._)("label",{for:"category"},"分類",-1),dt={class:"form-floating"},ct=(0,n._)("label",{for:"Unit"},"單位",-1),ut={class:"form-floating"},mt=(0,n._)("label",{for:"origin_price"},"原價",-1),pt={class:"form-floating"},ht=(0,n._)("label",{for:"price"},"售價",-1),gt={class:"form-floating"},bt=(0,n._)("label",{for:"description"},"產品描述",-1),ft={class:"form-floating"},_t=(0,n._)("label",{for:"content"},"說明內容",-1),vt={class:"form-check"},yt=(0,n._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),wt={class:"modal-footer"},Pt=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),kt={class:"modal fade",id:"delModal",tabindex:"-1","aria-labelledby":"delModal","aria-hidden":"true"},Ut={class:"modal-dialog modal-xl"},xt={class:"modal-content"},Dt=(0,n._)("div",{class:"modal-header bg-primary text-white"},[(0,n._)("h1",{class:"modal-title fs-5",id:"productDetailModalLabel"},"---"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$t={class:"modal-body row justify-content-around"},Ct={class:"modal-footer"},Mt=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),jt={key:0,class:"loading"},Ot=(0,n._)("div",{class:"spinner-border",role:"status"},[(0,n._)("span",{class:"visually-hidden"},"Loading...")],-1),qt=[Ot];function Vt(t,e,o,a,r,i){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",h,[(0,n._)("div",g,[(0,n._)("div",b,[(0,n._)("div",f,[_,(0,n._)("button",{type:"button",class:"btn btn-primary offset-md-8 col-md-2","data-bs-toggle":"modal",onClick:e[0]||(e[0]=t=>i.addPro()),"data-bs-target":"#productDetailModal","data-bs-title":"新增產品"},"新增產品")]),(0,n._)("table",v,[(0,n._)("thead",null,[(0,n._)("tr",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.thSetting,((t,e)=>((0,n.wg)(),(0,n.iD)("th",{key:e,width:t.width},(0,p.zw)(t.name),9,y)))),128))])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.products,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[(0,n._)("td",null,(0,p.zw)(t.title),1),(0,n._)("td",null,(0,p.zw)(t.origin_price),1),(0,n._)("td",null,(0,p.zw)(t.price),1),(0,n._)("td",null,[1==t.is_enabled?((0,n.wg)(),(0,n.iD)("span",w,"啟用")):(0,n.kq)("",!0),1!=t.is_enabled?((0,n.wg)(),(0,n.iD)("span",P,"未啟用")):(0,n.kq)("",!0)]),(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.showProDetail(t)},"查看細節",8,k)]),(0,n._)("td",U,[(0,n._)("button",{type:"button",class:"btn btn-outline-primary",onClick:e=>i.editPro(t),"data-bs-toggle":"modal","data-bs-target":"#productDetailModal","data-bs-title":"編輯產品"},"編輯",8,x),(0,n._)("button",{type:"button",class:"btn btn-outline-warning","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:e=>r.selectPro=t},"刪除",8,D)])])))),128))])]),(0,n._)("p",null,[(0,n.Uk)("目前有 "),(0,n._)("span",null,(0,p.zw)(r.products.length),1),(0,n.Uk)(" 項產品")])]),r.selectPro?((0,n.wg)(),(0,n.iD)("div",$,[C,(0,n._)("div",M,[(0,n._)("div",j,[(0,n._)("img",{class:"card-img-top primary-image",src:r.selectPro.imageUrl,alt:r.selectPro.title},null,8,O),(0,n._)("div",q,[(0,n._)("h5",V,[(0,n.Uk)((0,p.zw)(r.selectPro.title)+" ",1),(0,n._)("span",z,(0,p.zw)(r.selectPro.category),1)]),(0,n._)("p",E,"商品描述："+(0,p.zw)(r.selectPro.description),1),(0,n._)("p",Z,(0,p.zw)(r.selectPro.content),1),(0,n._)("div",S,[(0,n._)("p",L,(0,p.zw)(r.selectPro.price),1),(0,n._)("p",T,[(0,n._)("del",null,(0,p.zw)(r.selectPro.origin_price),1)]),(0,n.Uk)(" 元 / "+(0,p.zw)(r.selectPro.unit),1)])])]),(0,n._)("div",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.selectPro.imagesUrl,((t,e)=>((0,n.wg)(),(0,n.iD)("img",{key:e,src:t,alt:t,class:"images m-2"},null,8,H)))),128))])])])):(0,n.kq)("",!0)])]),(0,n._)("div",I,[(0,n._)("div",Y,[(0,n._)("div",K,[N,(0,n._)("div",B,[(0,n._)("div",F,[(0,n._)("div",G,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"imageUrl","onUpdate:modelValue":e[1]||(e[1]=t=>r.tmpPro.imageUrl=t),placeholder:"請輸入圖片連結",required:""},null,512),[[l.nr,r.tmpPro.imageUrl]]),J,(0,n._)("img",{src:r.tmpPro.imageUrl,alt:r.tmpPro.imageUrl,class:"images m-2"},null,8,Q)]),R,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.tmpPro.imagesUrl,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{class:"form-floating",key:e},[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t=>r.tmpPro.imagesUrl[e]=t,id:`imagesurl-${e}`,placeholder:"請輸入圖片連結",required:""},null,8,W),[[l.nr,r.tmpPro.imagesUrl[e]]]),(0,n._)("label",{for:`imagesurl-${e}`},"圖片網址",8,X),(0,n._)("img",{src:r.tmpPro.imagesUrl[e],alt:r.tmpPro.imagesUrl[e],class:"images m-2"},null,8,tt),""!=r.tmpPro.imagesUrl[e]?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"btn btn-outline-warning px-3",onClick:t=>i.delImgsUrl(e)},lt,8,et)):(0,n.kq)("",!0)])))),128)),(0,n._)("button",{type:"button",class:"btn btn-outline-primary",onClick:e[2]||(e[2]=t=>i.addImgsUrl())},"新增圖片")]),(0,n._)("div",at,[(0,n._)("div",rt,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":e[3]||(e[3]=t=>r.tmpPro.title=t),required:""},null,512),[[l.nr,r.tmpPro.title]]),nt]),(0,n._)("div",it,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入分類","onUpdate:modelValue":e[4]||(e[4]=t=>r.tmpPro.category=t),required:""},null,512),[[l.nr,r.tmpPro.category]]),st]),(0,n._)("div",dt,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"Unit",placeholder:"請輸入單位","onUpdate:modelValue":e[5]||(e[5]=t=>r.tmpPro.unit=t),required:""},null,512),[[l.nr,r.tmpPro.unit]]),ct]),(0,n._)("div",ut,[(0,n.wy)((0,n._)("input",{class:"form-control",id:"origin_price",placeholder:"請輸入原價",type:"number",min:"0","onUpdate:modelValue":e[6]||(e[6]=t=>r.tmpPro.origin_price=t),required:""},null,512),[[l.nr,r.tmpPro.origin_price,void 0,{number:!0}]]),mt]),(0,n._)("div",pt,[(0,n.wy)((0,n._)("input",{class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":e[7]||(e[7]=t=>r.tmpPro.price=t),type:"number",min:"0",required:""},null,512),[[l.nr,r.tmpPro.price,void 0,{number:!0}]]),ht]),(0,n._)("div",gt,[(0,n.wy)((0,n._)("textarea",{class:"form-control",placeholder:"請輸入產品描述",id:"description","onUpdate:modelValue":e[8]||(e[8]=t=>r.tmpPro.description=t)},null,512),[[l.nr,r.tmpPro.description]]),bt]),(0,n._)("div",ft,[(0,n.wy)((0,n._)("textarea",{class:"form-control",placeholder:"請輸入說明內容",id:"content","onUpdate:modelValue":e[9]||(e[9]=t=>r.tmpPro.content=t)},null,512),[[l.nr,r.tmpPro.content]]),_t]),(0,n._)("div",vt,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"is_enabled","onUpdate:modelValue":e[10]||(e[10]=t=>r.tmpPro.is_enabled=t),"true-value":1,"false-value":0},null,512),[[l.e8,r.tmpPro.is_enabled]]),yt])])]),(0,n._)("div",wt,[Pt,(0,n._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[11]||(e[11]=t=>i.savePro())},"儲存")])])])]),(0,n._)("div",kt,[(0,n._)("div",Ut,[(0,n._)("div",xt,[Dt,(0,n._)("div",$t,[(0,n._)("h1",null,"是否要刪除 "+(0,p.zw)(r.selectPro?.title),1)]),(0,n._)("div",Ct,[Mt,(0,n._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[12]||(e[12]=t=>i.delProduct())},"刪除")])])])]),r.isloading?((0,n.wg)(),(0,n.iD)("div",jt,qt)):(0,n.kq)("",!0)],64)}o(7658);var zt={name:"HomeView",data(){return{products:[],selectPro:void 0,tmpPro:{imagesUrl:[]},isloading:!0,url:"https://vue3-course-api.hexschool.io/v2",path:"sesame-store",thSetting:[{name:"產品名稱",width:150},{name:"原價",width:120},{name:"售價",width:120},{name:"是否啟用",width:150},{name:"查看細節",width:120},{name:"",width:200}],productModal:void 0}},methods:{showProDetail(t){console.log(t),this.selectPro=t},addImgsUrl(){console.log(this.tmpPro),this.tmpPro.imagesUrl?""!==this.tmpPro.imagesUrl[this.tmpPro.imagesUrl.length-1]&&this.tmpPro.imagesUrl.push(""):this.tmpPro.imagesUrl=[""]},editPro(t){this.tmpPro=t},addPro(){this.tmpPro={imagesUrl:[]}},savePro(){console.log(this.tmpPro),this.tmpPro.id?a.Z.put(`${this.url}/api/${this.path}/admin/product/${this.tmpPro.id}`,{data:this.tmpPro}).then((()=>{})):a.Z.post(`${this.url}/api/${this.path}/admin/product`,{data:this.tmpPro}).then((()=>{this.$router.go(0)}))},getData(){a.Z.get(`${this.url}/api/${this.path}/admin/products`).then((t=>{this.isloading=!1,this.products=t.data.products})).catch((t=>{this.isloading=!1,console.log(t)}))},checkLogin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");a.Z.defaults.headers.common.Authorization=t,a.Z.post(`${this.url}/api/user/check`).then((()=>{this.getData()})).catch((()=>{this.isloading=!1,this.alert("未登入"),this.$router.push({path:"/",replace:!0})}))},listenModal(){const t=document.getElementById("productDetailModal");t.addEventListener("show.bs.modal",(e=>{const o=e.relatedTarget,l=o.getAttribute("data-bs-title"),a=t.querySelector(".modal-title");a.textContent=`${l}`}))},delProduct(){const t=window,e=`${this.url}/api/${this.path}/admin/product/${this.selectPro.id}`;a.Z["delete"](e).then((e=>{console.log(e),t.alert(e.data.message),this.$router.go(0)})).catch((e=>{t.alert(e)}))},delImgsUrl(t){this.tmpPro.imagesUrl.length>1?this.tmpPro.imagesUrl.splice(t,1):this.tmpPro.imagesUrl=[]}},mounted(){this.checkLogin(),this.listenModal()}};const Et=(0,s.Z)(zt,[["render",Vt]]);var Zt=Et;const St={class:"container"},Lt={class:"container-page"},Tt={class:"row justify-content-center"},At=(0,n._)("h1",{class:"h3 mb-3 font-weight-normal"}," 請先登入 ",-1),Ht={class:"col-8"},It={class:"form-floating mb-3"},Yt=(0,n._)("label",{for:"username"},"Email address",-1),Kt={class:"form-floating"},Nt=(0,n._)("label",{for:"password"},"Password",-1),Bt=(0,n._)("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),Ft=(0,n._)("p",{class:"mt-5 mb-3 text-muted"}," © 2021~∞ - 六角學院 ",-1);function Gt(t,e,o,a,r,i){return(0,n.wg)(),(0,n.iD)("div",St,[(0,n._)("div",Lt,[(0,n._)("div",Tt,[At,(0,n._)("div",Ht,[(0,n._)("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=(0,l.iM)(((...t)=>i.login&&i.login(...t)),["prevent"]))},[(0,n._)("div",It,[(0,n.wy)((0,n._)("input",{type:"email",class:"form-control",id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>r.submit.username=t),placeholder:"name@example.com",required:"",autofocus:""},null,512),[[l.nr,r.submit.username]]),Yt]),(0,n._)("div",Kt,[(0,n.wy)((0,n._)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.submit.password=t),placeholder:"Password",required:""},null,512),[[l.nr,r.submit.password]]),Nt]),Bt],32)])]),Ft])])}var Jt={name:"LoginView",data(){return{submit:{username:"",password:""},url:"https://vue3-course-api.hexschool.io/v2",path:"sesame-store"}},methods:{login(){console.log(this.submit),a.Z.post(`${this.url}/admin/signin`,this.submit).then((t=>{console.log(t);const{token:e,expired:o}=t.data;document.cookie=`hexToken=${e}; expires=${new Date(o)}; `,this.$router.push({path:"/home",replace:!0})})).catch((t=>{this.alert(t.data.message)}))}}};const Qt=(0,s.Z)(Jt,[["render",Gt]]);var Rt=Qt;const Wt=[{path:"/home",name:"home",component:Zt},{path:"/",name:"Login",component:Rt},{path:"/about",name:"about",component:()=>o.e(443).then(o.bind(o,7381))}],Xt=(0,m.p7)({history:(0,m.r5)(),routes:Wt});var te=Xt;o(2166);(0,l.ri)(u).use(te,r.Z,a.Z).mount("#app")}},e={};function o(l){var a=e[l];if(void 0!==a)return a.exports;var r=e[l]={id:l,loaded:!1,exports:{}};return t[l](r,r.exports,o),r.loaded=!0,r.exports}o.m=t,function(){o.amdO={}}(),function(){var t=[];o.O=function(e,l,a,r){if(!l){var n=1/0;for(c=0;c<t.length;c++){l=t[c][0],a=t[c][1],r=t[c][2];for(var i=!0,s=0;s<l.length;s++)(!1&r||n>=r)&&Object.keys(o.O).every((function(t){return o.O[t](l[s])}))?l.splice(s--,1):(i=!1,r<n&&(n=r));if(i){t.splice(c--,1);var d=a();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[l,a,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var l in e)o.o(e,l)&&!o.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,l){return o.f[l](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/about.9f4be0a1.js"}}(),function(){o.miniCssF=function(t){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vue-gh-pages:";o.l=function(l,a,r,n){if(t[l])t[l].push(a);else{var i,s;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==l||u.getAttribute("data-webpack")==e+r){i=u;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",e+r),i.src=l),t[l]=[a];var m=function(e,o){i.onerror=i.onload=null,clearTimeout(p);var a=t[l];if(delete t[l],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(t){return t(o)})),e)return e(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/vue-gh-pages/"}(),function(){var t={143:0};o.f.j=function(e,l){var a=o.o(t,e)?t[e]:void 0;if(0!==a)if(a)l.push(a[2]);else{var r=new Promise((function(o,l){a=t[e]=[o,l]}));l.push(a[2]=r);var n=o.p+o.u(e),i=new Error,s=function(l){if(o.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var r=l&&("load"===l.type?"missing":l.type),n=l&&l.target&&l.target.src;i.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",i.name="ChunkLoadError",i.type=r,i.request=n,a[1](i)}};o.l(n,s,"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,l){var a,r,n=l[0],i=l[1],s=l[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(s)var c=s(o)}for(e&&e(l);d<n.length;d++)r=n[d],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(c)},l=self["webpackChunkvue_gh_pages"]=self["webpackChunkvue_gh_pages"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(2079)}));l=o.O(l)})();
//# sourceMappingURL=app.1e17d8cf.js.map